var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));import{x as default_1,u as useParams,z as useObservableState,J as useObservable,K as modifyDocument,c as useComponentContext,H as Card,L as CardHeader,O as IconButton,P as default_1$1,d as documents$}from"./doks.js";import*as React from"react";import{useCallback,useRef}from"react";import{combineLatest}from"rxjs";import{map}from"rxjs/operators";import{g as generateUtilityClass,a as generateUtilityClasses,q as styled,r as useThemeProps,b as _objectWithoutPropertiesLoose,_ as _extends,e as composeClasses,j as jsx,h as clsx,i as jsxs}from"./main.js";import{G as Grid}from"./Grid.js";import"react-dom";function getCardContentUtilityClass(e){return generateUtilityClass("MuiCardContent",e)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded=["className","component"],useUtilityClasses=e=>{const{classes:t}=e;return composeClasses({root:["root"]},getCardContentUtilityClass,t)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),CardContent=React.forwardRef((function(e,t){const o=useThemeProps({props:e,name:"MuiCardContent"}),{className:s,component:r="div"}=o,a=_objectWithoutPropertiesLoose(o,_excluded),n=_extends({},o,{component:r}),i=useUtilityClasses(n);return jsx(CardContentRoot,_extends({as:r,className:clsx(i.root,s),ownerState:n,ref:t},a))}));var CardContent$1=CardContent;const formatDate=e=>new Date(e).toLocaleString(),ContentWrapper=default_1(Grid)((({theme:e})=>({display:"flex",alignItems:"start",flexDirection:"row",[e.breakpoints.down("sm")]:{maxWidth:"100%",flexBasis:"initial"}}))),Content=()=>{var e;const t=useParams(),o=useObservableState(useObservable((e=>combineLatest(e,documents$).pipe(map((([e,t])=>t.get(e[0].contentSlug))))),[t])),s=useCallback((()=>{modifyDocument(__spreadProps(__spreadValues({},o),{isFavourite:!o.isFavourite}))}),[o]),r=useRef(),a=useCallback((()=>{var e;if(void 0!==t.headingIndex){const o=null==(e=r.current)?void 0:e.querySelector(`#heading-${t.headingIndex}`);if(o){const e=60,t=window.document.body.getBoundingClientRect().top,s=o.getBoundingClientRect().top-t-e;console.log(s),window.scrollTo({top:s,behavior:"smooth"})}}}),[t.headingIndex]),{TableOfContents:n,MarkdownRenderer:i}=useComponentContext();return jsxs(ContentWrapper,{item:!0,xs:9,children:[jsxs(Card,{elevation:2,sx:{padding:2,textAlign:"justify",overflowX:"auto"},children:[o&&jsx(CardHeader,{action:jsx(IconButton,{"aria-label":"favourite",onClick:s,children:jsx(default_1$1,{sx:{color:o.isFavourite&&"red"}})}),title:o.name,subheader:(l=o.lastModified,new Date(l).toLocaleString())}),jsx(CardContent$1,{ref:r,sx:{display:"block",overflow:"auto"},children:jsx(i,{mdx:null==o?void 0:o.mdx,onAfterRender:a})})]}),(null==(e=null==o?void 0:o.mdx)?void 0:e.includes("#"))&&jsx(Card,{elevation:2,sx:{padding:2,textAlign:"justify",overflowX:"auto",marginTop:"20px",marginBottom:"20px",marginLeft:"-10px",whiteSpace:"pre",overflow:"visible",position:"sticky",top:"80px"},children:jsx(n,{mdx:null==o?void 0:o.mdx})})]});var l};export{Content,Content as default};