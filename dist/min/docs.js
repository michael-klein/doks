import*as React from"react";import{lazy,Suspense,useCallback}from"react";import{ai as createSvgIcon,j as jsx,o as styled,I as ButtonBase,_ as _extends,ao as emphasize,m as generateUtilityClass,n as generateUtilityClasses,a9 as Typography,p as useThemeProps,v as _objectWithoutPropertiesLoose,w as composeClasses,z as clsx,k as createSvgIcon$1,l as interopRequireDefault,r as require$$2,a as jsxs,R as Routes,b as Route,u as useComponentContext,V as useParams,at as Fragment,a3 as CircularProgress,W as useObservableAndState,az as queuedDocuments$,aA as fetchingDocuments$,ax as useNavigate,ah as documents$,$ as Box}from"./main.js";import{combineLatest,map}from"rxjs";import{S as Snackbar,A as Alert}from"./Snackbar.js";import{C as Container}from"./Container.js";import{G as Grid}from"./Grid.js";import"react-dom";import"rxjs/operators";var MoreHorizIcon=createSvgIcon(jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");const BreadcrumbCollapsedButton=styled(ButtonBase,{skipSx:!0})((({theme:e})=>_extends({display:"flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":_extends({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":_extends({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:emphasize(e.palette.grey[200],.12)}:{backgroundColor:emphasize(e.palette.grey[600],.12)})}))),BreadcrumbCollapsedIcon=styled(MoreHorizIcon)({width:24,height:16});function BreadcrumbCollapsed(e){return jsx("li",{children:jsx(BreadcrumbCollapsedButton,_extends({focusRipple:!0},e,{ownerState:e,children:jsx(BreadcrumbCollapsedIcon,{ownerState:e})}))})}function getBreadcrumbsUtilityClass(e){return generateUtilityClass("MuiBreadcrumbs",e)}const breadcrumbsClasses=generateUtilityClasses("MuiBreadcrumbs",["root","ol","li","separator"]);var breadcrumbsClasses$1=breadcrumbsClasses;const _excluded=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],useUtilityClasses=e=>{const{classes:s}=e;return composeClasses({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},getBreadcrumbsUtilityClass,s)},BreadcrumbsRoot=styled(Typography,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,s)=>[{[`& .${breadcrumbsClasses$1.li}`]:s.li},s.root]})({}),BreadcrumbsOl=styled("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,s)=>s.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),BreadcrumbsSeparator=styled("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,s)=>s.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function insertSeparators(e,s,t,r){return e.reduce(((a,o,l)=>(l<e.length-1?a=a.concat(o,jsx(BreadcrumbsSeparator,{"aria-hidden":!0,className:s,ownerState:r,children:t},`separator-${l}`)):a.push(o),a)),[])}const Breadcrumbs=React.forwardRef((function(e,s){const t=useThemeProps({props:e,name:"MuiBreadcrumbs"}),{children:r,className:a,component:o="nav",expandText:l="Show path",itemsAfterCollapse:n=1,itemsBeforeCollapse:c=1,maxItems:i=8,separator:d="/"}=t,u=_objectWithoutPropertiesLoose(t,_excluded),[m,p]=React.useState(!1),x=_extends({},t,{component:o,expanded:m,expandText:l,itemsAfterCollapse:n,itemsBeforeCollapse:c,maxItems:i,separator:d}),h=useUtilityClasses(x),g=React.useRef(null),j=React.Children.toArray(r).filter((e=>React.isValidElement(e))).map(((e,s)=>jsx("li",{className:h.li,children:e},`child-${s}`)));return jsx(BreadcrumbsRoot,_extends({ref:s,component:o,color:"text.secondary",className:clsx(h.root,a),ownerState:x},u,{children:jsx(BreadcrumbsOl,{className:h.ol,ref:g,ownerState:x,children:insertSeparators(m||i&&j.length<=i?j:(b=j,c+n>=b.length?b:[...b.slice(0,c),jsx(BreadcrumbCollapsed,{"aria-label":l,onClick:()=>{p(!0);const e=g.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...b.slice(b.length-n,b.length)]),h.separator,d,x)})}));var b}));var Breadcrumbs$1=Breadcrumbs,Folder={},_interopRequireDefault=interopRequireDefault.exports;Object.defineProperty(Folder,"__esModule",{value:!0});var default_1=Folder.default=void 0,_createSvgIcon=_interopRequireDefault(createSvgIcon$1),_jsxRuntime=require$$2,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}),"Folder");default_1=Folder.default=_default;const DocFetcher=lazy((()=>import("./doc_fetcher.js"))),Project=()=>{const{Content:e}=useComponentContext(),s=useParams();return jsx(Fragment,{children:s.contentSlug&&jsx(Suspense,{fallback:jsx(CircularProgress,{sx:{position:"absolute",top:"50%",left:"50%"}}),children:jsx(e,{})})})},Layout=({children:e})=>{const[s]=useObservableAndState((()=>combineLatest([queuedDocuments$,fetchingDocuments$]).pipe(map((([e,s])=>e.docs.size>0||s.size>0))))),t=useParams(),r=useNavigate(),a=useCallback((e=>{documents$.value.has(e)&&r(`/docs/${t.projectSlug}/${e}`,{replace:!0})}),[t]),{Sidebar:o,Navbar:l,Background:n,Footer:c}=useComponentContext();return jsxs(n,{children:[jsx(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:s,sx:{display:{xs:"none",sm:"block"}},children:jsx(Alert,{sx:{boxShadow:1},severity:"info",icon:!1,children:jsxs(Box,{sx:{display:"flex",alignItems:"center"},children:[jsx(CircularProgress,{size:18,sx:{marginRight:1}})," ","fetching documents in the background..."]})})}),jsx(DocFetcher,{mode:"docs"}),jsx(l,{}),jsxs(Container,{sx:{paddingTop:6,marginBottom:10,flex:"auto"},children:[jsxs(Breadcrumbs$1,{"aria-label":"breadcrumb",sx:{height:50,alignItems:"center",justifyContent:"center",display:{xs:"none",sm:"flex"}},children:[jsx(default_1,{sx:{fontSize:"1.1em",color:"text.secondary",transform:"translateY(0.15em)"}}),t.projectSlug&&jsx(Typography,{color:"text.secondary",children:t.projectSlug}),t.contentSlug&&jsx(Typography,{color:"text.secondary",children:t.contentSlug}),t.headingIndex&&jsx(Typography,{color:"text.secondary",children:t.headingIndex})]}),jsxs(Grid,{container:!0,spacing:2,children:[jsx(o,{onProjectSelect:e=>{r(`/docs/${e}`,{replace:!0})},onNodeSelect:a,mode:"docs"}),e]})]}),jsx(c,{})]})},Docs=()=>jsxs(Routes,{children:[jsx(Route,{path:"/:projectSlug",element:jsx(Layout,{children:jsx(Project,{})})}),jsx(Route,{path:"/:projectSlug/:contentSlug",element:jsx(Layout,{children:jsx(Project,{})})}),jsx(Route,{path:"/:projectSlug/:contentSlug/:headingIndex",element:jsx(Layout,{children:jsx(Project,{})})}),jsx(Route,{path:"/",element:jsx(Layout,{children:jsx(Project,{})})})]});export{Docs,Docs as default};